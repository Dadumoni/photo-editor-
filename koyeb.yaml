name: photo-editor-bot
regions:
  - fra
services:
  - type: web
    name: photo-editor-bot
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: python web_server.py
    ports:
      - port: 8000
        protocol: http
    scaling:
      minInstances: 1 # Ensure at least one instance always runs
    envVars:
      - key: TELEGRAM_BOT_TOKEN
        value: "$TELEGRAM_BOT_TOKEN"
      - key: PORT
        value: "8000"
      - key: PUBLIC_URL
        value: "https://${service.name}.${parent.domains.0.name}" # Automatically use the generated Koyeb URL
      - key: KOYEB_APP_NAME
        value: "photo-editor-bot" 